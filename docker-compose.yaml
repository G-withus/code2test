services:
  frontend:
    build:
      context: ./Frontend
      dockerfile: Dockerfile
    ports:
      - "80:80"
    depends_on:
      - backend
    networks:
      - testmdt-network
    restart: unless-stopped

  portregistration:
    build:
      context: ./Portregistration
      dockerfile: Dockerfile
    ports:
      - "81:81"
    depends_on:
      - backend
    networks:
      - testmdt-network
    restart: unless-stopped

  backend:
    build:
      context: ./Backend
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
      - "14000-14099:14000-14099/udp"
      - "14100-14199:14100-14199/udp"
      - "14200-14299:14200-14299/udp"
      - "14300-14399:14300-14399/udp"
      - "14400-14499:14400-14499/udp"
      - "14500-14599:14500-14599/udp"
      - "14600-14699:14600-14699/udp"
      - "14700-14799:14700-14799/udp"
      - "14800-14899:14800-14899/udp"
      - "14900-14999:14900-14999/udp"
      - "15000-15099:15000-15099/udp"
      - "15100-15199:15100-15199/udp"
      - "15200-15299:15200-15299/udp"
      - "15300-15399:15300-15399/udp"
      - "15400-15499:15400-15499/udp"
      - "15500-15599:15500-15599/udp"
      - "15600-15699:15600-15699/udp"
      - "15700-15799:15700-15799/udp"
      - "15800-15899:15800-15899/udp"
      - "15900-15999:15900-15999/udp"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
    networks:
      - testmdt-network
    restart: unless-stopped

networks:
  testmdt-network:
    driver: bridge